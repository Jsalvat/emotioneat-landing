---
import BlogLayout from '../../../layouts/BlogLayout.astro';
import { supabase } from '../../../lib/supabase';
import en from '../../../i18n/en.json';
import { marked } from 'marked';

// Language is English for this page
const lang = 'en';

// Hardcoded slug for this specific post
const slug = 'comida-emocional-causas-consecuencias-estrategias'; // Keep the same slug for now

// Fetch the blog post
let post = null;
let relatedPosts = null;

if (supabase) {
	try {
		// Get the specific post
		const { data: postData, error: postError } = await supabase
			.from('blog_posts')
			.select('*')
			.eq('slug', slug)
			.eq('status', 'published')
			.single();

		if (postError) {
			console.error('Error fetching blog post:', postError);
		} else {
			// Create English version of the post
			post = {
				...postData,
				title: 'Emotional Eating: How to Identify and Overcome It',
				content: `# Emotional Eating: How to Identify and Overcome It

Emotional eating is a phenomenon that affects millions of people worldwide. Beyond satisfying physiological hunger, we often eat for deep emotional reasons that can sabotage our health and wellness goals. In this comprehensive article, we will explore what emotional eating exactly is, how to identify it in your daily life, its consequences on physical and mental health, and above all, practical and effective strategies to manage it.

## What is Emotional Eating?

Emotional eating, also known as emotional feeding, is the act of eating not to satisfy physiological hunger, but to manage negative emotions or seek emotional comfort. **Key difference:** While physiological hunger is a biological need that arises gradually and is satisfied with any nutritious food, emotional eating arises suddenly and seeks specific foods, usually rich in sugars, fats, or refined carbohydrates.

### Types of Emotional Eating

1. **Comfort eating:** Seeking relief in comforting foods during moments of stress or sadness.
2. **Celebration eating:** Using food as a reward for achievements or happy moments.
3. **Boredom eating:** Eating out of habit or lack of stimulation.
4. **Social eating:** Eating in social situations due to group pressure or to "fit in".

## Signs That You're Eating for Emotions

Recognizing emotional eating patterns is the first step to changing them. Here are the most common signs:

### Physical Signs
- **Sudden hunger:** Arises out of nowhere, unrelated to time elapsed since last meal.
- **Specific craving:** Intense desires for specific foods (usually unhealthy).
- **Fast eating:** Ingesting food at great speed, almost without chewing.
- **Eating until discomfort:** Continuing to eat even after feeling full.

### Emotional Signs
- **After stressful situations:** Such as discussions, work problems, or financial pressures.
- **Moments of loneliness:** Seeking company in food when feeling alone.
- **Boredom:** Eating to lack of stimulation or to "kill time".
- **Frustration or anger:** Using food as an emotional outlet.

### Behavioral Signs
- **Eating in hiding:** Feeling guilty and eating when no one sees you.
- **Compulsive thoughts:** Spending a lot of time thinking about food or planning when to eat.
- **Skipping healthy meals:** Preferring comforting foods over nutritious options.
- **Compulsive shopping:** Stockpiling "emergency" foods at home.

> **Important note:** If you eat for emotions, you generally don't fully enjoy the food. You eat automatically, distracted, watching TV or working.

## Physical Consequences of Emotional Eating

Emotional eating not only affects your relationship with food, but has real impacts on your physical health:

### Digestive Problems
- **Reflux and heartburn:** Foods rich in fats and sugars irritate the stomach.
- **Constipation:** Lack of fiber in processed foods affects digestion.
- **Irritable bowel syndrome:** Chronic stress associated can worsen symptoms.

### Weight Gain and Obesity
- **Caloric excess:** Comfort foods are generally hypercaloric.
- **Insulin resistance:** Excessive sugar consumption can lead to type 2 diabetes.
- **Fluid retention:** Chronic inflammation contributes to water retention.

### Cardiovascular Health Problems
- **Elevated cholesterol:** Processed foods rich in saturated fats.
- **Hypertension:** Chronic stress and inflammation affect blood pressure.
- **Increased risk of heart disease:** Combination of metabolic risk factors.

### Immune System Impact
- **Chronic inflammation:** Refined sugars promote systemic inflammation.
- **Greater susceptibility to diseases:** Weakened immune system is less effective.
- **Slower recovery:** Wounds and illnesses take longer to heal.

## Emotional and Psychological Consequences

Beyond the physical, emotional eating has a deep impact on your mental well-being:

### Low Self-Esteem and Guilt
- **Guilt cycle:** Eating for emotions → feeling guilt → eating more to relieve guilt.
- **Loss of confidence:** Repeated failure in attempts to control eating.
- **Constant self-criticism:** Negative internal dialogue about your relationship with food.

### Greater Anxiety and Depression
- **Temporary escape:** Food provides momentary relief, but the underlying problem persists.
- **Emotional addiction:** Dependence on food to regulate mood.
- **Social isolation:** Avoiding social situations for fear of judgment about eating habits.

### Difficulty Managing Emotions
- **Weakened emotional skills:** Dependence on food instead of other coping strategies.
- **Relationship problems:** Emotional eating can affect family and social interactions.
- **Emotional burnout:** Exhaustion from trying to control something that seems uncontrollable.

### Impact on Productivity
- **Lack of energy:** After binge eating, many people feel lethargic and unmotivated.
- **Constant distraction:** Thinking about food or planning meals interferes with focus.
- **Work absenteeism:** Health problems related can lead to work absences.

## Strategies to Manage Emotional Eating

The good news is that emotional eating can be managed with effective and consistent strategies. Here I present a comprehensive approach:

### 1. Recognition and Awareness
**Fundamental step:** Before changing any behavior, you need to recognize it.
- **Keep an emotional journal:** Record what you eat, when, and what you were feeling.
- **Identify triggers:** Recognize situations, emotions, or thoughts that trigger emotional eating.
- **Practice mindfulness:** Eat slowly, savoring each bite, without distractions.
- **Install tracking apps:** Use applications to help you monitor patterns.

### 2. Healthy Emotional Management
**Develop alternatives to food:**
- **Relaxation techniques:** Meditation, deep breathing, yoga or tai chi.
- **Physical exercise:** A 10-minute walk can be as effective as eating chocolate.
- **Pleasant activities:** Reading, listening to music, calling a friend, hobbies.
- **Grounding techniques:** 5-4-3-2-1 exercises to reconnect with the present.

### 3. Food Strategies
**Change your relationship with food:**
- **Meal planning:** Having regular and nutritious meals reduces vulnerability.
- **Alternative foods:** Keep healthy snacks available for craving moments.
- **10-minute rule:** When you feel the urge, wait 10 minutes before eating.
- **Conscious eating:** Sit down to eat, without TV or phone, focusing on taste and texture.

### 4. Professional Support
**Don't be afraid to ask for help:**
- **Cognitive-behavioral therapy:** Especially effective for eating disorders.
- **Support groups:** Sharing experiences with others can be very comforting.
- **Specialized nutritionists:** Professionals who understand emotional eating.
- **Specialized apps:** Programs like EmotionEat that combine tracking with professional support.

### 5. Prevention and Maintenance
**Build sustainable habits:**
- **Daily routines:** Establish regular times for eating and sleeping.
- **Stress management:** Preventive techniques such as regular exercise and good sleep hygiene.
- **Support network:** Share your goals with trusted friends or family.
- **Achievement celebration:** Recognize and celebrate your victories, no matter how small.

## Specific Strategies for Difficult Moments

### When Stress is Intense
1. **5-minute break:** Breathe deeply and evaluate if you really have physiological hunger.
2. **Scenario change:** Go for a walk or call someone to distract yourself.
3. **Ice technique:** Put ice in your mouth - the sensation can distract you from craving.
4. **Alternative list:** Have a prepared list of non-food related activities.

### In Social Situations
1. **Prior planning:** Eat something light before social events.
2. **Alternative beverages:** Opt for lemon water or infusions instead of alcohol.
3. **Conversation focus:** Stay busy conversing instead of thinking about food.
4. **Small portions:** If there's food, take small portions and eat slowly.

### At Night
1. **Relaxation routine:** Establish a nighttime routine without food (reading, meditation).
2. **Proper environment:** Create an environment conducive to sleep, not eating.
3. **Early last meal:** Dinner at least 2-3 hours before bed.
4. **Insomnia alternatives:** If you can't sleep, get up and do something relaxing.

## The Path to Food Freedom

Overcoming emotional eating is a gradual process that requires patience and self-compassion. Remember:
- **It's not about perfection:** Setbacks are part of the learning process.
- **Every small step counts:** Celebrating daily achievements maintains motivation.
- **Compassion is key:** Treat your future self with the same kindness you'd treat a friend.
- **Change is possible:** Millions of people have transformed their relationship with food.

## Conclusion: Your Relationship with Food Can Improve

Emotional eating is not a character flaw, but a learned coping strategy that can be unlearned. With awareness, practical tools, and adequate support, you can develop a healthy and balanced relationship with food.

If you struggle with emotional eating and want professional support, I invite you to explore how EmotionEat can help you. Our platform combines intelligent tracking, pattern analysis with AI, and personalized advice so you can create sustainable habits.

**Are you ready to take the first step toward a healthier relationship with food?** Change begins with the decision to try, and every day is an opportunity to choose differently.

*Remember: You're not alone on this journey, and support is available when you need it.*`,
				meta_title: 'Emotional Eating: How to Identify and Overcome It',
				meta_description: 'Discover what emotional eating is, its warning signs, physical and emotional consequences, and practical strategies to create a healthy relationship with food.',
				excerpt: 'Discover what emotional eating is, its warning signs, physical and emotional consequences, and practical strategies to create a healthy relationship with food.'
			};
		}

		// Configure marked for better rendering
		marked.setOptions({
			breaks: true,
			gfm: true,
		});

		// Convert Markdown to HTML
		if (post) {
			post.contentHtml = marked(post.content);
		}

		// Get related posts if we have the current post
		if (post) {
			const { data: relatedPostsData } = await supabase
				.from('blog_posts')
				.select('title, slug, excerpt, cover_image_url, published_at')
				.eq('status', 'published')
				.neq('id', postData.id)
				.order('published_at', { ascending: false })
				.limit(3);

			relatedPosts = relatedPostsData;
		}
	} catch (error) {
		console.error('Error connecting to Supabase:', error);
	}
}

// Handle 404 if post not found
if (!post) {
	return Astro.redirect('/blog');
}

// SEO Meta
const title = post.meta_title || `${post.title} | EmotionEat Blog`;
const description = post.meta_description || post.excerpt || post.title;
const image = post.cover_image_url || '/og-image.jpg';

// Calculate reading time if not set
const readingTime = post.reading_time || Math.ceil(post.content.split(' ').length / 200);
---

<BlogLayout
	title={title}
	description={description}
	image={image}
	lang={lang}
	published_at={post.published_at}
	updated_at={post.updated_at}
>
	<!-- Article Header -->
	<section class="bg-white py-16">
		<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
			<div class="text-center mb-8">
				<div class="flex items-center justify-center text-sm text-gray-500 mb-4">
					<time datetime={post.published_at}>
						{new Date(post.published_at).toLocaleDateString('en-US', {
							year: 'numeric',
							month: 'long',
							day: 'numeric'
						})}
					</time>
					<span class="mx-2">•</span>
					<span>{readingTime} min read</span>
				</div>

				<h1 class="text-3xl md:text-5xl font-bold text-gray-900 mb-6 leading-tight">
					{post.title}
				</h1>

				{post.excerpt && (
					<p class="text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed">
						{post.excerpt}
					</p>
				)}
			</div>

			{post.cover_image_url && (
				<div class="aspect-video rounded-xl overflow-hidden mb-8 shadow-lg">
					<img
						src={post.cover_image_url}
						alt={post.title}
						class="w-full h-full object-cover"
					/>
				</div>
			)}
		</div>
	</section>

	<!-- Article Content -->
	<article class="bg-white">
		<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
			<div class="prose prose-lg max-w-none">
				<Fragment set:html={post.contentHtml} />
			</div>
		</div>
	</article>

	<!-- Author & Share Section -->
	<section class="bg-gray-50 py-12">
		<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
			<div class="flex flex-col md:flex-row items-center justify-between">
				<div class="flex items-center mb-6 md:mb-0">
					<div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-bold text-lg mr-4">
						E
					</div>
					<div>
						<p class="font-semibold text-gray-900">{post.author || 'EmotionEat Team'}</p>
						<p class="text-gray-600 text-sm">
							Working to improve food relationships
						</p>
					</div>
				</div>

				<div class="flex items-center space-x-4">
					<span class="text-gray-600 text-sm">
						Share:
					</span>
					<a
						href={`https://twitter.com/intent/tweet?text=${encodeURIComponent(post.title)}&url=${encodeURIComponent(Astro.url.href)}`}
						target="_blank"
						rel="noopener noreferrer"
						class="text-gray-400 hover:text-blue-500 transition-colors"
						aria-label="Share on Twitter"
					>
						<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
							<path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
						</svg>
					</a>
					<a
						href={`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(Astro.url.href)}`}
						target="_blank"
						rel="noopener noreferrer"
						class="text-gray-400 hover:text-blue-600 transition-colors"
						aria-label="Share on Facebook"
					>
						<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
							<path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
						</svg>
					</a>
				</div>
			</div>
		</div>
	</section>

	<!-- Related Posts -->
	{relatedPosts && relatedPosts.length > 0 && (
		<section class="bg-white py-16">
			<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
				<h2 class="text-3xl font-bold text-gray-900 text-center mb-12">
					Related Articles
				</h2>

				<div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
					{relatedPosts.map((relatedPost: any) => (
						<article class="bg-gray-50 rounded-lg overflow-hidden hover:shadow-md transition-shadow duration-300">
							{relatedPost.cover_image_url && (
								<div class="aspect-video overflow-hidden">
									<img
										src={relatedPost.cover_image_url}
										alt={relatedPost.title}
										class="w-full h-full object-cover"
										loading="lazy"
									/>
								</div>
							)}
							<div class="p-6">
								<h3 class="text-lg font-semibold text-gray-900 mb-2 line-clamp-2">
									<a
										href={`/blog/${relatedPost.slug}`}
										class="hover:text-blue-600 transition-colors"
									>
										{relatedPost.title}
									</a>
								</h3>
								<p class="text-gray-600 text-sm line-clamp-2">
									{relatedPost.excerpt}
								</p>
							</div>
						</article>
					))}
				</div>
			</div>
		</section>
	)}

	<!-- CTA Section -->
	<section class="bg-gradient-to-r from-blue-600 to-indigo-700 py-16">
		<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
			<h2 class="text-3xl font-bold text-white mb-4">
				Ready to Start Your Journey?
			</h2>
			<p class="text-xl text-blue-100 mb-8">
				Discover how EmotionEat can support you in building healthier habits.
			</p>
			<div class="flex flex-col sm:flex-row gap-4 justify-center">
				<a
					href="#pricing"
					class="inline-flex items-center px-8 py-4 bg-white text-blue-600 font-semibold rounded-lg hover:bg-gray-50 transition-colors shadow-lg"
				>
					View Plans
				</a>
				<a
					href="/"
					class="inline-flex items-center px-8 py-4 border-2 border-white text-white font-semibold rounded-lg hover:bg-white hover:text-blue-600 transition-colors"
				>
					Learn More
				</a>
			</div>
		</div>
	</section>
</BlogLayout>

<style>
	.line-clamp-2 {
		display: -webkit-box;
		-webkit-line-clamp: 2;
		-webkit-box-orient: vertical;
		overflow: hidden;
	}

	/* Blog content styles */
	.prose {
		color: #374151;
		max-width: none;
	}

	.prose h1 {
		font-size: 2.25rem;
		font-weight: 800;
		line-height: 1.1;
		margin-top: 3rem;
		margin-bottom: 1.5rem;
		color: #111827;
	}

	.prose h2 {
		font-size: 1.875rem;
		font-weight: 700;
		line-height: 1.2;
		margin-top: 3rem;
		margin-bottom: 1.5rem;
		color: #111827;
	}

	.prose h3 {
		font-size: 1.5rem;
		font-weight: 600;
		line-height: 1.3;
		margin-top: 2.5rem;
		margin-bottom: 1rem;
		color: #111827;
	}

	.prose h4 {
		font-size: 1.25rem;
		font-weight: 600;
		line-height: 1.4;
		margin-top: 2rem;
		margin-bottom: 0.75rem;
		color: #111827;
	}

	.prose p {
		margin-top: 1.25rem;
		margin-bottom: 1.25rem;
		line-height: 1.7;
	}

	.prose ul, .prose ol {
		margin-top: 1.25rem;
		margin-bottom: 1.25rem;
		padding-left: 1.5rem;
	}

	.prose li {
		margin-top: 0.5rem;
		margin-bottom: 0.5rem;
		line-height: 1.6;
	}

	.prose blockquote {
		border-left: 4px solid #3b82f6;
		padding-left: 1rem;
		margin: 2rem 0;
		font-style: italic;
		color: #4b5563;
		background-color: #f8fafc;
		padding: 1rem 1.5rem;
		border-radius: 0.375rem;
	}

	.prose strong {
		font-weight: 600;
		color: #111827;
	}

	.prose code {
		background-color: #f1f5f9;
		padding: 0.125rem 0.375rem;
		border-radius: 0.25rem;
		font-size: 0.875em;
		font-family: 'Monaco', 'Consolas', monospace;
	}

	.prose pre {
		background-color: #1f2937;
		color: #f9fafb;
		padding: 1rem;
		border-radius: 0.5rem;
		overflow-x: auto;
		margin: 2rem 0;
	}

	.prose pre code {
		background-color: transparent;
		padding: 0;
		color: inherit;
	}
</style>
