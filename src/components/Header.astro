---
interface Props {
  t?: {
    header: {
      features: string;
      faq: string;
      startNow: string;
    };
  };
}

const { t } = Astro.props;

const translations = t || {
  header: {
    features: 'Features',
    faq: 'FAQ',
    startNow: 'Get Started'
  }
};

const appUrl = import.meta.env.PUBLIC_APP_URL || 'https://app.emotioneat.com';
---

<header class="fixed top-0 left-0 right-0 z-50 bg-white/90 backdrop-blur-md border-b border-neutral-200 transition-all duration-300">
  <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <!-- Logo -->
      <div class="flex items-center">
        <a href="/" class="flex items-center space-x-2">
          <img
            src="/Logo EmotionEat_Login - Registro.png"
            alt="EmotionEat - Stop emotional eating"
            class="h-10 w-auto"
            width="120"
            height="40"
            loading="eager"
            fetchpriority="high"
          />
        </a>
      </div>

      <!-- Desktop Navigation -->
      <nav class="hidden md:flex items-center space-x-8" aria-label="Main navigation">
        <a href="#features" class="text-neutral-600 hover:text-primary-500 font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-primary-300 focus:rounded-md px-2 py-1">
          {translations.header.features}
        </a>
        <a href="/blog" class="text-neutral-600 hover:text-primary-500 font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-primary-300 focus:rounded-md px-2 py-1">
          Blog
        </a>
        <a href="#faq" class="text-neutral-600 hover:text-primary-500 font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-primary-300 focus:rounded-md px-2 py-1">
          {translations.header.faq}
        </a>
      </nav>

      <!-- CTA Button -->
      <div class="flex items-center">
        <a
          href={appUrl}
          class="inline-flex items-center px-6 py-2.5 bg-primary-400 hover:bg-primary-500 text-white font-semibold rounded-xl transition-all hover:shadow-lg hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-primary-300 focus:ring-offset-2"
          data-cta-location="header"
          aria-label={translations.header.startNow}
        >
          {translations.header.startNow}
        </a>
      </div>
    </div>
  </nav>
</header>

<script>
  import { initMixpanel, trackCTAClick } from '../scripts/mixpanel';

  function initTracking() {
    initMixpanel();

    document.querySelectorAll('[data-cta-location]').forEach(button => {
      button.addEventListener('click', () => {
        const location = button.getAttribute('data-cta-location');
        if (location) {
          trackCTAClick(location, 'en');
        }
      });
    });
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initTracking);
  } else {
    initTracking();
  }
</script>
